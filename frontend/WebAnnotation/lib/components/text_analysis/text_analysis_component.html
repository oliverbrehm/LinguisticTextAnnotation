<!-- Components info: https://webdev.dartlang.org/components -->
<div class="container" *ngIf="!analyzing && annotatedText() == null">
    <div class="row">
        <h1>Text Analyse</h1>
    </div>

    <div class="row">
        Bitte geben Sie einen Text ein.
    </div>

    <div class="row">
        <material-input class="bordered"
                        id="analysisInputText"
                        multiline
                        label="Text"
                        rows="10"
                        autoFocus floatingLabel style="width:80%"
                        [(ngModel)]="lookupText">
        </material-input>
    </div>

    <div class="row">
        <material-button raised
                         (trigger)="lookup()">
            Analysieren
        </material-button>
    </div>
</div>

<div class="container" *ngIf="analyzing">
    <h1>Text Analyse</h1>
    <material-spinner ></material-spinner><br>
    Analysiere...
</div>

<div class="container" *ngIf="!analyzing && annotatedText() != null">
    <div class="row">
        <h1>Text Analyse</h1>
    </div>

    <div class="row">
        <div class="col bordered">
            <div *ngFor="let word of annotatedText().words" class="word">
                <div *ngIf="word.annotated">
                    <div *ngFor="let syllable of word.syllables"class="syllable">
                        <p *ngIf="syllable.stressed" class="stressed">{{syllable.text}}</p>
                        <p *ngIf="!syllable.stressed" class="unstressed">{{syllable.text}}</p>
                    </div>
                </div>

                <p *ngIf="word.unknown">{{word.text}}</p>
                <p *ngIf="word.notFound" class="notFound" (click)="unknownWordClicked(word)">{{word.text}}</p>
                <p *ngIf="word.number" class="number">{{word.text}}</p>
                <p *ngIf="word.punctuation">{{word.text}}</p>
            </div>

            <br><br>
            <material-button raised
                             (trigger)="startWordReview()">
                Unbekannte Wörter klären
            </material-button>
            (oder direkt auf das Wort klicken)
        </div>
    </div>
    <br>

    <div class="row">
        <div class="col-md-4">
            <h2>Einstellungen</h2>

            <div class="bordered">

                Zeilenabstand:
                <div class="input-group">
                    <input type="text" disabled value="{{selectedConfiguration.line_height}}" class="form-control"/>
                    <span id="slidecontainer" style="padding-left: 0.5em; padding-top: 0.5em;">
                        <input type="range" min="10" max="60" [(ngModel)]="lineHeightText" (change)="lineHeightChanged()" class="slider" id="myRange">
                    </span>

                </div>

                Betonte Silbe:
                <div class="input-group">
                    <input type="text" disabled value="{{selectedConfiguration.stressed_color}}" class="form-control" />
                    <span class="form-control">
                        <input #inputColorStressed type="color" [(ngModel)]="selectedConfiguration.stressed_color"
                            (input)="colorStressedChanged(inputColorStressed.value)">
                    </span>

                </div>

                Unbetonte Silbe:
                <div class="input-group">
                    <input type="text" disabled value="{{selectedConfiguration.unstressed_color}}" class="form-control" />
                    <span class="form-control">
                        <input #inputColorUnstressed type="color" [(ngModel)]="selectedConfiguration.unstressed_color"
                               (input)="colorUnstressedChanged(inputColorUnstressed.value)">
                    </span>
                </div>
            </div>
            <br>

            <div *ngIf="userAccountService.loggedIn && textConfigurations() != null" class="bordered">
                <h3>Vorlagen</h3>
                Klicke auf eine Vorlage in der Liste um sie auf den aktuellen Text anzuwenden.<br>

                <div *ngIf="textConfigurations().length < 1">
                    <strong>- Es gibt noch eine Vorlagen -</strong>
                </div>

                <material-select class="bordered-list">
                    <material-select-item *ngFor="let c of textConfigurations()"
                                          (trigger)="configurationSelected(c)">
                        {{c.name}}
                        <button type="button" class="close delete-button" aria-label="Vorlage löschen" (click)="deleteConfiguration(c)">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </material-select-item>
                </material-select>
                <br>

                <material-input label="Vorlagenname"
                                autoFocus floatingLabel style="width:80%"
                                [(ngModel)]="newConfigurationName">
                </material-input>

                <material-button raised
                                 (trigger)="saveConfiguration()">
                    Vorlage speichern
                </material-button><br>
                Speichere die aktuelle Vorlage um sie wiederzuverwenden.
            </div>
        </div>

        <div class="col-md">
            <h2>Text</h2>

            <div class="bordered">
                <material-input multiline
                                label="Text"
                                rows="5"
                                autoFocus floatingLabel style="width:80%"
                                [(ngModel)]="lookupText">
                </material-input>
                <br>

                <material-button raised
                                 (trigger)="lookup()">
                    Neu analysieren
                </material-button>
            </div>
            <br>

            <div *ngIf="userAccountService.loggedIn" class="bordered">
                <h3>Text speichern</h3>
                Speichere den aktuellen Text, er kann dann auf der Benutzer Seite aufgerufen und wiederverwendet werden.
                <material-input label="Titel"
                                autoFocus floatingLabel style="width:80%"
                                [(ngModel)]="textTitle">
                </material-input>
                <br>

                <material-button raised
                                 (trigger)="saveText()">
                    Speichern
                </material-button>
            </div>
            <br>

            <div class="bordered">
                <h3>Neu</h3>
                <material-button raised
                                 (trigger)="newText()">
                    Neuen Text eingeben
                </material-button><br>
                Aktuelle Analyse verwerfen und neuen Text eingeben.
            </div>
        </div>
    </div>
</div>
