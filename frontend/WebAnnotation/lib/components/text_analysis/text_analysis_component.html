<!-- Components info: https://webdev.dartlang.org/components -->
<div class="container" *ngIf="!analyzing && annotatedText() == null">
    <div class="row">
        <h1>Text Analyse</h1>
    </div>

    <div class="row">
        Bitte geben Sie einen Text ein.
    </div>

    <div class="row">
        <material-input class="bordered"
                        id="analysisInputText"
                        multiline
                        label="Text"
                        rows="10"
                        autoFocus floatingLabel style="width:80%"
                        [(ngModel)]="lookupText">
        </material-input>
    </div>

    <div class="row">
        <material-button raised
                         (trigger)="lookup()">
            Analysieren
        </material-button>
    </div>
</div>

<div class="container" *ngIf="analyzing">
    <h1>Text Analyse</h1>
    <material-spinner ></material-spinner><br>
    Analysiere...
</div>

<div class="container" *ngIf="!analyzing && annotatedText() != null">
    <div class="row">
        <h1>Text Analyse</h1>
    </div>

    <div class="row">
        <div class="col bordered">
            <span *ngFor="let word of annotatedText().words">
                <span *ngIf="word.annotated" class="word">
                    <span *ngFor="let syllable of word.syllables"class="syllable">
                        <span *ngIf="syllable.stressed" class="stressed">{{syllable.text}}</span>
                        <span *ngIf="!syllable.stressed" class="unstressed">{{syllable.text}}</span>
                    </span>
                </span>

                <span *ngIf="word.unknown" class="word">{{word.text}}</span>
                <span *ngIf="word.notFound" class="notFound word" (click)="unknownWordClicked(word)">{{word.text}}</span>
                <span *ngIf="word.number" class="number word">{{word.text}}</span>
                <span *ngIf="word.punctuation">{{word.text}}</span>
            </span>

            <br><br>
            <material-button raised
                             (trigger)="startWordReview()">
                Unbekannte Wörter klären
            </material-button>
            (oder direkt auf das Wort klicken)
        </div>
    </div>
    <br>

    <div class="row">
        <div class="col-md-4">
            <h2>Einstellungen</h2>

            <div class="bordered">
                Betonte Silbe:<br>
                <input type="checkbox" (change)="stressedBoldChanged($event)" />Fett<br>
                <div class="input-group">
                    <input type="text" disabled value="{{selectedConfiguration.stressed_color}}" class="form-control" />
                    <span class="form-control">
                        <input #inputColorStressed type="color" [(ngModel)]="selectedConfiguration.stressed_color"
                            (input)="applyCurrentConfiguration()">
                    </span>
                </div>
                <br>

                Unbetonte Silbe:
                <div class="input-group">
                    <input type="text" disabled value="{{selectedConfiguration.unstressed_color}}" class="form-control" />
                    <span class="form-control">
                        <input #inputColorUnstressed type="color" [(ngModel)]="selectedConfiguration.unstressed_color"
                               (input)="applyCurrentConfiguration()">
                    </span>
                </div>
                <br>

                Wort Hintergrundfarbe:<br>
                <input type="checkbox"  (change)="useWordBackgroundChanged($event)" />Aktivieren<br>
                <div *ngIf="selectedConfiguration.use_background" class="input-group">
                    <input type="text" disabled value="{{selectedConfiguration.word_background}}" class="form-control" />
                    <span class="form-control">
                        <input #inputColorWordBackground type="color" [(ngModel)]="selectedConfiguration.word_background"
                               (input)="applyCurrentConfiguration()">
                    </span>
                </div>
                <br>

                Silbe hervorheben:<br>
                <input type="radio" name="radioSyllableColor" value="foreground"
                       (click)="radioSyllableColorChanged($event)"/>Vordergrundfarbe<br>
                <input type="radio" name="radioSyllableColor" value="background"
                       (click)="radioSyllableColorChanged($event)" checked />Hintergrundfarbe<br>
                <br>

                Schriftgröße:
                <div class="input-group">
                    <input type="text" disabled value="{{selectedConfiguration.font_size}}" class="form-control"/>
                    <span style="padding-left: 0.5em; padding-top: 0.5em;">
                        <input type="range" min="8" max="32" [(ngModel)]="fontSizeValue"
                               (input)="fontSizeSliderMoved($event)" (change)="applyCurrentConfiguration()" class="slider">
                    </span>
                </div>
                <br>

                Silbenabstand:
                <div class="input-group">
                    <input type="text" disabled value="{{selectedConfiguration.syllable_distance}}" class="form-control"/>
                    <span style="padding-left: 0.5em; padding-top: 0.5em;">
                        <input type="range" min="0" max="8" [(ngModel)]="syllableDistanceValue"
                           (input)="syllableDistanceSliderMoved($event)" (change)="applyCurrentConfiguration()" class="slider">
                    </span>
                </div>
                <br>

                Wort abstand:
                <div class="input-group">
                    <input type="text" disabled value="{{selectedConfiguration.word_distance}}" class="form-control"/>
                    <span style="padding-left: 0.5em; padding-top: 0.5em;">
                        <input type="range" min="2" max="20" [(ngModel)]="wordDistanceValue"
                           (input)="wordDistanceSliderMoved($event)" (change)="applyCurrentConfiguration()" class="slider">
                    </span>
                </div>
                <br>

                Zeilenabstand:
                <div class="input-group">
                    <input type="text" disabled value="{{selectedConfiguration.line_height}}" class="form-control"/>
                    <span style="padding-left: 0.5em; padding-top: 0.5em;">
                        <input type="range" min="10" max="40" [(ngModel)]="lineHeightValue"
                               (input)="lineHeightSliderMoved($event)" (change)="applyCurrentConfiguration()" class="slider" id="myRange">
                    </span>
                </div>
            </div>
            <br>

            <div *ngIf="userAccountService.loggedIn && textConfigurations() != null" class="bordered">
                <h3>Vorlagen</h3>
                Klicke auf eine Vorlage in der Liste um sie auf den aktuellen Text anzuwenden.<br>

                <div *ngIf="textConfigurations().length < 1">
                    <strong>- Es gibt noch eine Vorlagen -</strong>
                </div>

                <material-select class="bordered-list">
                    <material-select-item *ngFor="let c of textConfigurations()"
                                          (trigger)="configurationSelected(c)">
                        {{c.name}}
                        <button type="button" class="close delete-button" aria-label="Vorlage löschen" (click)="deleteConfiguration(c)">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </material-select-item>
                </material-select>
                <br>

                <material-input label="Vorlagenname"
                                autoFocus floatingLabel style="width:80%"
                                [(ngModel)]="newConfigurationName">
                </material-input>

                <material-button raised
                                 (trigger)="saveConfiguration()">
                    Vorlage speichern
                </material-button><br>
                Speichere die aktuelle Vorlage um sie wiederzuverwenden.
            </div>
        </div>

        <div class="col-md">
            <h2>Text</h2>

            <div class="bordered">
                <material-input multiline
                                label="Text"
                                rows="5"
                                autoFocus floatingLabel style="width:80%"
                                [(ngModel)]="lookupText">
                </material-input>
                <br>

                <material-button raised
                                 (trigger)="lookup()">
                    Neu analysieren
                </material-button>
            </div>
            <br>

            <div *ngIf="userAccountService.loggedIn" class="bordered">
                <h3>Text speichern</h3>
                Speichere den aktuellen Text, er kann dann auf der Benutzer Seite aufgerufen und wiederverwendet werden.
                <material-input label="Titel"
                                autoFocus floatingLabel style="width:80%"
                                [(ngModel)]="textTitle">
                </material-input>
                <br>

                <material-button raised
                                 (trigger)="saveText()">
                    Speichern
                </material-button>
            </div>
            <br>

            <div class="bordered">
                <h3>Neu</h3>
                <material-button raised
                                 (trigger)="newText()">
                    Neuen Text eingeben
                </material-button><br>
                Aktuelle Analyse verwerfen und neuen Text eingeben.
            </div>
        </div>
    </div>
</div>
