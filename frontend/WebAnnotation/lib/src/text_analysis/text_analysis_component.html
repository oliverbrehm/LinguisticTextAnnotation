<!-- Components info: https://webdev.dartlang.org/components -->

<div *ngIf="!analyzing && annotatedText() == null">
    <h1>Text Analyse</h1>
    <p>
        Bitte geben Sie einen Text ein.
    </p>
    <material-input multiline
                    label="Text"
                    autoFocus floatingLabel style="width:80%"
                    [(ngModel)]="lookupText">
    </material-input>
    <br>
    <material-button raised
                  (trigger)="lookup()">
        Analysieren
    </material-button>
</div>

<div *ngIf="analyzing">
    <h1>Text Analyse</h1>
    <material-spinner ></material-spinner>Analysiere...
</div>

<div class="container" *ngIf="!analyzing && annotatedText() != null">
    <div class="row">
        <h1>Text Analyse</h1>
    </div>

    <div class="row">
        <div class="col bordered">
            <div *ngFor="let word of annotatedText().words" class="word">
                <div *ngIf="word.annotated">
                    <div *ngFor="let syllable of word.syllables"class="syllable">
                        <p *ngIf="syllable.stressed" class="stressed">{{syllable.text}}</p>
                        <p *ngIf="!syllable.stressed" class="unstressed">{{syllable.text}}</p>
                    </div>
                </div>

                <p *ngIf="word.unknown">{{word.text}}</p>
                <p *ngIf="word.notFound" class="notFound">{{word.text}}</p>
                <p *ngIf="word.number" class="number">{{word.text}}</p>
                <p *ngIf="word.punctuation">{{word.text}}</p>
            </div>
        </div>
    </div>

    <div class="row">

        <div class="col-md-4 bordered">
            <h2>Einstellungen</h2>
            <material-input label="Zeilenabstand" floatingLabel (keyup)="lineHeightChanged()" [(ngModel)]="lineHeightText"></material-input><br>
            Betonte Silbe: <input #inputColorStressed type="color" [(ngModel)]="colorStressed" (input)="colorStressedChanged(inputColorStressed.value)"> {{colorStressed}}<br>
            Unbetonte Silbe: <input #inputColorUnstressed type="color" [(ngModel)]="colorUnstressed" (input)="colorUnstressedChanged(inputColorUnstressed.value)"> {{colorUnstressed}}
            <br>
            <br>

            <h2>Neu</h2>
            <material-button raised
                             (trigger)="newText()">
                Neuen Text eingeben
            </material-button>
        </div>

        <div class="col-md bordered">
            <h2>Original</h2>
            {{annotatedText().originalText}}
            <br>
            <div *ngIf="userAccountService.loggedIn">
                <material-button raised
                                 (trigger)="saveText(annotatedText().originalText)">
                    Text speichern
                </material-button>
            </div>
        </div>
    </div>
</div>
